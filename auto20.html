<html>

<head>

    <META Charset = "utf-8" />

<link rel="stylesheet" type="text/css" class="ui" href="stylesheets/semantic.min.css">
<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
<link rel="stylesheet" href="stylesheets/auto20.css" />

<!--[if lte IE 8]>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
<![endif]-->


<style>
    body {
        background-image: url("img/leaf-shadow.png");
        background-color: rgba(200,200,155,1);
    }
    #map { float: left; height: 800px; width: 74%; min-width: 420px; border-radius: 15px}
    #join { float: right; width: 25%; min-width: 200px; padding-left: 7px; border-radius: 15px;
            background-color: rgba(255,255,255,0.7)}
    #searchDiv { position:fixed; top: 20px; left: 60px; z-index: 1}
    #chatDiv { display:block; position:fixed; bottom: 20px; left: 60px; z-index: 1;
        width: 250px; height: 100px; background: rgba(200,200,200,0.5); border: 3px; border-radius: 10px; padding: 5px; overflow: auto; }
    #chatMessageDiv { overflow: auto;}



    /* add media querry for mobile here */
    
</style>

<script src="javascripts/lib/jquery-1.10.2.js"></script>
<script src="javascripts/lib/jquery-ui.js"></script>
<script src="javascripts/lib/underscore-min.js"></script>
<script src="javascripts/lib/backbone-min.js"></script>

<script src="javascripts/lib/tongwen_core.js"></script>
<script src="javascripts/lib/tongwen_table_pt2s.js"></script>
<script src="javascripts/lib/tongwen_table_t2s.js"></script>

<script src='https://cdn.firebase.com/v0/firebase.js'></script>
<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
<script src="http://leaflet.github.io/Leaflet.label/leaflet.label.js"></script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

<title>è‡ªå­¸2.0--åœ°åœ–å¼çš„äº’åŠ©é€šè¨ŠéŒ„</title>

    <script type="text/javascript">        
        function makeTimeStamp(){
            var d = new Date();

            var curr_second = d.getSeconds();
            var curr_minute = d.getMinutes();
            var curr_hour = d.getHours();
            (curr_hour > 12) ? curr_hour = ' ä¸‹åˆ ' + (curr_hour - 12) : curr_hour = ' ä¸Šåˆ ' + curr_hour;
            var curr_date = d.getDate();
            var curr_month = d.getMonth() + 1; //Months are zero based
            var curr_year = d.getFullYear();

            return curr_year +"/" + curr_month + "/" + curr_date + curr_hour + ':' + curr_minute +':'+ curr_second;
        }
    </script>

</head>

<body>

    <div id="searchDiv">            <!-- Point:Search  Status: Usable lev 1-->
        <div id="searchbox">
            <input id="search" type="text" data-ng-modle = "seekFriend" placeholder="è¼¸å…¥é—œéµå­—æ‰¾æœ‹å‹">
            <button id="goSearch">Go!</button>
        </div>
    </div>

    <div id="chatDiv">              <!-- Point:Chat    Status: Demo-->
        <div id="messageDiv">
        </div>
        <div id="chatInputDiv">
            <input type = 'text' id = 'nameInput' placeholder = 'è¼¸å…¥æ‚¨çš„åå­—'></input>
            <input type = 'text' id = 'messageInput' placeholder = 'è¼¸å…¥æ‚¨çš„èŠå¤©è¨Šæ¯'></input>
        </div>
    </div>

    <script type="text/javascript">
        var myDataRef = new Firebase('https://af93lsxvgl1.firebaseio-demo.com/'); //å¾…ä¿®
        $('#messageInput').keypress(function (e) {
            if (e.keyCode == 13) {
                var name = $('#nameInput').val();
                var text = $('#messageInput').val();
                var time = makeTimeStamp()
                    time = (' -- 0'+time.split('åˆ')[1].replace(' ', '')).replace('011', '11').replace('012', '12');
                myDataRef.push({name: name, text: text, time: time});
                $('#messageInput').val('');
            }
        });

        myDataRef.on('child_added', function(snapshot) {
            var message = snapshot.val();    
            displayChatMessage(message.name, message.text, message.time);
        });

        function displayChatMessage(name, text, time) {
            $('<div/>').text(time).prepend($('<em/>').text(text)).prepend($('<em/>').text(name+': ')).appendTo($('#messageDiv'));
            $('#messageDiv')[0].scrollTop = $('#messageDiv')[0].scrollHeight;
        };

      </script>


    <div id="map">                          <!-- Point: Main-Map   Status: Usable lev0 -->
    </div>

    <div id="join">                         <!-- Point:Form  -->
        <h1>å‡èµ·æ‚¨çš„äº¤å‹æ——å¹Ÿ</h1>

        é€™ä»½è¡¨å–®æ˜¯ç‚ºäº†è‡ªå­¸å®¶åº­ä¹‹é–“èƒ½ç›¸äº’èªè­˜ï¼Œæ‰¾åˆ°å½¼æ­¤ã€‚<br /><br />
        å¦‚æœ‰å…©ä½ä»¥ä¸Šçš„å­©å­ï¼Œè«‹ç‚ºä»–å€‘å„å¡«ä¸€ä»½è¡¨å–®ã€‚<br />

<!--        <div id = 'faq'><a>FAQ</a></div>  -->

        <div>

            <h2>*æ‚¨çš„åå­—?</h2>
            <input id = 'name' type = 'text' placeholder = 'è«‹è¼¸å…¥ä½ çš„å¤§å'></input>
            
            <h2>*æ‚¨çš„æ¨¡ç³Šåœ°å€?</h2>
            <input id = 'address' type = 'text' placeholder = 'Aç¸£Bå¸‚Cè·¯'></input>

            <h2>*å¯å…¬é–‹çš„è¯çµ¡æ–¹å¼ï¼Œ
</h2>
            <textarea id = 'connect_me ' rows = '5' cols = '30' placeholder = 'å¦‚æœ‰å¤šè¡Œï¼Œè«‹åœ¨åˆ†è¡Œè™•åŠ ä¸Š<br>è¨˜è™Ÿ'></textarea>
    

            <h2>*æ‚¨çš„ç¶²å€?</h2>
            <input id = 'site' type = 'text' placeholder = 'æ‚¨çš„å€‹äººç¶²å€'></input>
            
            <h2>*æ‚¨çš„ç¤¾ç¾¤ç¶²å€?</h2>
            <input id = 'site2' id = 'address' type = 'text' placeholder = 'è®“åˆ¥äººèªè­˜æ‚¨çš„ç¤¾ç¾¤'></input>


            <h2>*å­¸ç¿’è€…çš„å‡ºç”Ÿå¹´ä»½(è¥¿å…ƒ)?</h2>
            <input id = 'learner_birth' type = 'text' placeholder = 'å­¸ç¿’è€… = æ‚¨æˆ–æ‚¨çš„å­©å­'></input>
            
            <h2>*å­¸ç¿’è€…çš„èº«ä»½? (è¤‡é¸)</h2>
            <p id = 'learner_role'>                
                <input type = 'checkbox' id = 'è‡ªå­¸å®¶é•·'>è‡ªå­¸å®¶é•·</input>
                <input type = 'checkbox' id = 'è‡ªå­¸ç”Ÿ'>è‡ªå­¸ç”Ÿ</input>
                <input type = 'checkbox' id = 'ç¨ç«‹æ•™è‚²å·¥ä½œè€…'>ç¨ç«‹æ•™è‚²å·¥ä½œè€…</input><br />
                <input type = 'checkbox' id = 'è‡ªå­¸åœ˜é«”'>è‡ªå­¸åœ˜é«”</input>
                <input type = 'checkbox' id = 'è‡ªä¸»ç”Ÿæ´»è€…'>è‡ªä¸»ç”Ÿæ´»è€…</input>
                <input type = 'checkbox' id = 'è‡ªè€•è¾²'>è‡ªè€•è¾²</input><br />
                <input type = 'checkbox' id = 'å¾®å‹å‰µæ¥­è€…'>å¾®å‹å‰µæ¥­è€…</input>
            </p>




            <h2>*æ——å¹Ÿçš„é¡è‰²?</h2>
            <p>è‡ªå­¸åœ˜é«”=red, è‡ªå­¸å®¶åº­=yellow,<br />
                ç¨ç«‹æ•™å¸«=green, å…¶ä»–æœ‹å‹=blue</p>
            
            <p id = 'Style'>
                <input name = 'Style' type = 'radio' id = 'large_red'>large_red</input>
                <input name = 'Style' type = 'radio' id = 'large_yellow'>large_yellow</input>
                <input name = 'Style' type = 'radio' id = 'large_green'>large_green</input>
                <input name = 'Style' type = 'radio' id = 'large_blue'>large_blue</input>
            </p>


            <h2>*å­¸ç¿’è€…çš„èˆˆè¶£?</h2>
            <input id = 'learner_habit' type = 'text' placeholder = 'æœ‰åŠ©æ–¼é—œéµå­—æœè©¢'></input>                      
            <h2>*å®¶åº­å¯ä»¥åˆ†äº«ã€åŠ©äººçš„é ˜åŸŸ?</h2>
            <input id = 'share' type = 'text' placeholder = 'æœ‰åŠ©æ–¼åˆ¥äººç”¨é—œéµå­—æ‰¾åˆ°æ‚¨ï¼Œå°‹æ±‚æ”¯æŒ'></input>                        


            <h2>*å®¶åº­å¸Œæœ›çš„æ”¯æ´?</h2>            
            <input id = 'ask' type = 'text' placeholder = 'æœ‰åŠ©æ–¼åˆ¥äººç”¨é—œéµå­—æ‰¾åˆ°æ‚¨ï¼Œå°‹æ±‚æ”¯æŒ'></input>            
            <h2>*å…¬é–‹çš„è‡ªæˆ‘ä»‹ç´¹?</h2>
            <textarea id = 'note' rows = '5' cols = '30' placeholder = 'ä»»ä½•å¯ä»¥å…¬é–‹çš„è‡ªæˆ‘ä»‹ç´¹ï¼Œå¹«åŠ©åˆ¥äººèªè­˜ä½ ã€‚'></textarea>

            
<!--            <h2>Tags(for Search Engine)</h2>
            <span>ex tag1 <button>x</button></span>
            <input type = 'text' placeholder = 'ex1'></input> <button>Add tag</button> -->            
            <br/>
            <button id = 'formPerview' class = 'ui blue button'>é è¦½</button>           
            <button id = 'formSubmit' class = 'ui green button'>é€å‡º</button>

            <!-- address: å¦‚æœ‰å…©ä½ä»¥ä¸Šç›¸åŒï¼Œè¦ä¿®æˆç•¥æœ‰ä¸åŒï¼Œæ‰æœƒåˆ†åˆ¥é¡¯ç¤ºå‡ºå…©ä½çš„åœ–ç¤ºã€‚ -->

        </div>
     </div>

<script>

    

    Auto20 = Backbone.View.extend({
        el: $('body'),

        events :{
            'keypress input#search' : 'maybeSearch',
            'click button#goSearch' : 'changeHands',
            'click button#formPerview' : 'formPerview',
            'click button#formSubmit' : 'formSubmit'
        },

        initialize: function() {

            _.bindAll(this, 'feedback', 'maybeSearch','changeHands', 'formPerview', 'formSubmit', 'makePrev', 'render');

            
            this.osmUrl='http://{s}.tile.cloudmade.com/1dc4012079d54f93b27789a1fc4491e9/997/256/{z}/{x}/{y}.png';

            this.cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade';

            this.LeafIcon = L.Icon.extend({
                    options: {
                        shadowUrl: 'img/leaf-shadow.png',
                        iconSize:     [38, 95],
                        shadowSize:   [50, 64],
                        iconAnchor:   [22, 94],
                        labelAnchor:  [-3, -76],
                        shadowAnchor: [4, 62],
                        popupAnchor:  [-3, -76]
                    }
            });

            this.icon = {green: new this.LeafIcon({iconUrl: 'img/leaf-green.png'}),
                        red : new this.LeafIcon({iconUrl: 'img/leaf-red.png'}),
                        orange : new this.LeafIcon({iconUrl: 'img/leaf-orange.png'}),            
                        purple : new this.LeafIcon({iconUrl: 'img/leaf-purple.png'})
                    };

            this.dataRef = new Firebase('https://we-autolearn.firebaseio.com');           

            this.preview = false;

            this.render();
        },

        maybeSearch: function(ev) {
            if ( ev.which === 13 ) { 
                this.changeHands();
            }
        },

        changeHands: function() {
            console.log('call changeHands');

            $("#map").fadeOut(1000)

            setTimeout(function() {
                $('#map').remove();
                
                $('body').append("<div id = 'map'></div>");

                console.log('removeMap');

                eval("auto20.render()");

            }, 2000);


            //...

        },

        render: function() {

            var preview = this.preview;
            var icon = this.icon;
            var osmUrl = this.osmUrl;
            var attribution = this.cloudmadeAttribution;

//            var road_layer = new L.TileLayer(osmUrl, {
//                minZoom: 8,
  //              maxZoom: 18,
    //            attribution: '<a href="http://www.openstreetmap.org/" target="_blank">OpenStreetMap</a> CC-BY-SA, Tiles &copy; <a href="http://www.mapquest.com/" target="_blank">MapQuest</a>',
  //              subdomains: '1234'
    //        });

      //      map.addLayer(road_layer);

//            map.setView(new L.LatLng(23.654299340, 120.44776492196047), 7);


            // å¦‚æœå­˜åœ¨ï¼Œå…ˆæ¸…ç†ä¸€æ¬¡   <==  å¾…åŠ 



            this.dataRef.once('value', function(dataSnapshot) {
                // store dataSnapshot for use in below examples.
                var markers = [];
                var fMarkers = [];
                var lMarkers = [];
                var eMarkers = [];
                var gMarkers = [];
                var mMarkers = [];
  
                var circles = [];

                var autos = dataSnapshot.val();

//                console.log(autos);
  //              console.log(autos.length);
                if (preview) autos.push(preview);

                for (var i = 0; i < autos.length; i++) {

                    console.log(i);

                    var hand = autos[i];
                    if (!hand.name) {
                        console.log('ç•¥éç„¡åæ°'); continue
                    }

                    hand.latlngColumn.replace('(','').replace(')','');
                    console.log(hand.latlngColumn.split());

                    var colorIcon = icon.orange;

                    console.log(hand.name + hand.Style);
                    switch (hand.Style) {
                        case 'large_green' :
                            colorIcon = icon.green;                    break;
                        case 'large_yellow' :
                            colorIcon = icon.orange;                    break;
                        case 'large_blue' :
                            colorIcon = icon.purple;                    break;
                        case 'large_red' :
                            colorIcon = icon.red;                    break;
                        default:
                            colorIcon = icon.orange;
                    }

                    var seek = $('#search').val();

//                    var flag = hand.name+"<b>Hello world!</b><br />I am a popup.";
                    var flag = '<div class="flag" style="font-family: sans-serif;">'
                        +'<font color = "grey">åŠ å…¥æ™‚é–“: '+hand.æ™‚é–“æˆ³è¨˜+'</font><br />'
                        +'<h2> ğŸ‘ª '+hand.name+'ğŸ˜¼</h2><br />'
                        +hand.learner_birth+'å¹´æ¬¡çš„'+hand.learner_role+'ï¼Œä½åœ¨'+hand.address+'é™„è¿‘<br />'
                        +'<font color = "grey">ç¶“ç·¯åº¦: '+hand.latlngColumn+'</font>'
                        +'<br />'
                        +'<a href = "http://map.alearn.org.tw" target ="_blank" title = "æ›´å¤šè‡ªå­¸è³‡è¨Šï¼Œè«‹ä¸Šè‡ªå­¸åœ°åœ–"> <img height="100" width="120" src= "http://map.alearn.org.tw/images/automap.jpg" style = "float:right">  </a>'
                        +'<br />'
                        +'<b>ç¶²å€: </b>'+hand.site+'<br />'
                        +'<b>ç¤¾ç¾¤ç¶²å€: </b>'+hand.site2+'<br />'
                        +'<b>å…¬é–‹çš„è¯çµ¡æ–¹å¼:</b>'+hand.connect_me+'<br />'
                        +'<p align = "center"><b>æ­¡è¿è¯çµ¡!!</b></p><br />'
                        +'<br />'
                        +'<b>èˆˆè¶£åŒ…å«:</b>'+hand.learner_habit+'<br />'
                        +'<br />'
                        +'<b>å¯åˆ†äº«:</b>'+hand.share+'<br />'
                        +'<b>éœ€è¦:</b>'+hand.ask+'<br />'
                        +'<br />'
                        +'<b>è‡ªæˆ‘ä»‹ç´¹:</b>'+hand.note+'<br />'
                        +'<br />'
                        +'<hr>'
                        +'<b> <a href = "mailto:bestianhelp@gmail.com?subject=å›å ±åç‚º'+hand.name+'ã€æ™‚é–“æˆ³è¨˜ç‚º'+hand.æ™‚é–“æˆ³è¨˜+'çš„è³‡æ–™éŒ¯èª¤&body=ç¶²ç«™ç®¡ç†å“¡æ‚¨å¥½: æˆ‘è¦å›å ±åç‚º'+hand.name+'çš„è³‡æ–™éŒ¯èª¤ï¼Œè©³è«‹å¦‚ä¸‹ï¼š" title="å¦‚é‡éŒ¯èª¤èˆ‡æ¿«ç”¨ï¼Œè«‹æŒ‰æ­¤å›å ±ï¼Œè¬è¬!!">  å›å ±éŒ¯èª¤æˆ–æ¿«ç”¨ </a> </b>'
                        +'</div>'


                    if (seek && flag.indexOf(seek) == -1) {
                        console.log(seek+'ï¼š'+flag.indexOf(seek)+'ç•¥é'+hand.name);
                        continue;
                    }

                    if (seek && flag) {
                        flag = flag.replace(seek,'<span style = "background-color: rgba(255,255,155,1) ">' + seek + '</span>')
                    }


                    if (hand.latlngColumn.split(',').length != 2) {
                        console.log('LatLng:'+ hand.latlngColumn);
                        continue;
                    }

                    markers[i] = L.marker(hand.latlngColumn.split(','), {icon: colorIcon }).bindPopup(flag).bindLabel(hand.name, { noHide: true });

                    if (hand.learner_role.indexOf('è‡ªå­¸å®¶é•·') > -1) fMarkers.push(markers[i]);
                    if (hand.learner_role.indexOf('è‡ªå­¸ç”Ÿ') > -1) lMarkers.push(markers[i]);
                    if (hand.learner_role.indexOf('ç¨ç«‹æ•™è‚²å·¥ä½œè€…') > -1) eMarkers.push(markers[i]);
                    if (hand.learner_role.indexOf('è‡ªå­¸åœ˜é«”') > -1) gMarkers.push(markers[i]);
//                    if (hand.æ™‚é–“æˆ³è¨˜  ~~  makeTimeStamp()) {
  //                      mMarkers.push(markers[i]);
    //                }



 //                   circles[i] = L.circle(autos[i].latlngColumn.split(','), 500, {
   //                     color: 'green',
    //                    fillColor: '#3f0',
     //                   fillOpacity: 0.3
      //              }).addTo(map);

              //      labels[i] = new L.Label();
                //    labels[i].setContent(autos[i].name);
                  //  labels[i].setLatLng(autos[i].latlngColumn.split(','));
                  //  map.showLabel(labels[i]);;


                };

//                console.log("Mark"+markers);

                var goodMarkers = [];

                for (var i = 0; i < markers.length; i++) {
                    if (!markers[i]) {
                        console.log("Null marker:"+i);
                        continue;
                    }
                    goodMarkers.push(markers[i]);
                };


                var hands = {
                 a: L.layerGroup(goodMarkers),  // æ‰€æœ‰äºº           good!
                 f: L.layerGroup(fMarkers),  // è‡ªå­¸å®¶åº­         
                 l: L.layerGroup(lMarkers),  // è‡ªå­¸ç”Ÿ
                 e: L.layerGroup(eMarkers),  // æ•™è‚²å·¥ä½œè€…
                 g: L.layerGroup(mMarkers),  // è‡ªå­¸åœ˜é«”
                 m: L.layerGroup(goodMarkers),  // ç•¶æœˆæ–°äºº
                }


                var minimal = L.tileLayer(osmUrl, {
                    styleId: 113475,
                    attribution: attribution,
                    maxZoom: 18
                }), 
                    midnight  = L.tileLayer(osmUrl, {
                    styleId: 113784,
                    attribution: attribution,
                    maxZoom: 18
                });


                var baseMaps = {
                    "ç™½å¤©": minimal,
                    "é»‘å¤œ": midnight    //bug here-- æ²’æœ‰é€£åˆ°æ¨£å¼
                };


                this.overlayMaps = {
                    "è‡ªå­¸å®¶åº­": hands.f,
                    "è‡ªå­¸ç”Ÿ": hands.l,
                    "ç¨ç«‹æ•™è‚²å·¥ä½œè€…": hands.e,
                    "è‡ªå­¸åœ˜é«”": hands.g,
                    "é¡¯ç¤ºç•¶æœˆæ–°äºº": hands.m,
                    "é¡¯ç¤ºå…¨éƒ¨": hands.a,
                };

                this.map = L.map('map', {
                    center: new L.LatLng(23.654299340, 120.44776492196047),
                    zoom: 7,
                    layers: [minimal, hands.f, hands.l, hands.e, hands.g]
                });


                L.control.layers(baseMaps, this.overlayMaps).addTo(this.map);  // ä¹‹å¾Œå¯ä»¥è¨­åœ–å±¤ï¼šå®¶åº­, æ•™å¸«, è‡ªå­¸åœ˜é«”

                var intro = '<p>æ­¡è¿ä½¿ç”¨ã€Œè‡ªå­¸2.0ã€åœ°åœ–å¼äº’åŠ©é€šè¨ŠéŒ„ï¼ï¼'
                    +'<p>è‡ªå­¸çš„è·¯ä¸å­¤å–®ï¼Œç›¸ä¿¡æ‚¨ä¸€å®šå¾ˆå¿«èƒ½æ‰¾åˆ°å¿—åŒé“åˆçš„æœ‹å‹èˆ‡å…±å­¸å¤¥ä¼´ğŸ‘¼</p>';

                var welcomeWord = L.popup().setLatLng([22.01, 124.26]).setContent("<div id = 'welcome' style = 'font-size:2rem'>"+intro+"</div>").openOn(this.map);

                $( this.el ).scrollTop( 0 );

                console.log("render finished");

            });

        },

        formPerview: function() {    //é è¦½
            this.makePrev();
            this.changeHands();
        },

        formSubmit: function() {    //é€å‡ºè¡¨å–®

            this.makePrev();
            this.dataRef().push(this.preview);  this.preview = '';
            this.changeHands();
        },

        makePrev: function() {

            var timeStamp = makeTimeStamp();


            // é€™æ®µå¾…ä¿® === google geocoderèªªæ˜æ–‡ä»¶ï¼š
            // https://developers.google.com/maps/documentation/geocoding/?hl=zh-TW&csw=1

            function parseLatLng (blurAddr){
 //               var geocoder = google.maps.Geocoder(); // å¾…ä¿®
                
   //             geocoder.geocode( { 'address': blurAddr}, function(results, status) {
     //                   if (status == google.maps.GeocoderStatus.OK) {
       //                     console.log(results[0].geometry.location); //should have valid info

         //                   return results[0].geometry.location;                    
           //             }
           //    });
                
            }
            var latlngColumn = parseLatLng($('#address').val());

            var roles = ['è‡ªå­¸å®¶é•·','è‡ªå­¸ç”Ÿ','è‡ªå­¸åœ˜é«”','ç¨ç«‹æ•™è‚²å·¥ä½œè€…','è‡ªä¸»ç”Ÿæ´»è€…','è‡ªè€•è¾²','å¾®å‹å‰µæ¥­è€…'], goodRoles = [];
            for (var i = 0; i < roles.length; i++) {
                if (document.getElementById(roles[i]).checked) goodRoles.push(roles[i]);
            };

            var styles = ['large_red','large_yellow','large_green','large_blue'], goodStyle = '';
            for (var i = 0; i < styles.length; i++) {
                if (document.getElementById(styles[i]).checked) { goodStyle = styles[i]; break }
            };

            this.preview = {
                æ™‚é–“æˆ³è¨˜: timeStamp,
                name: $('#name').val(),
                address: $('#address').val(),
                latlngColumn : latlngColumn,
                connect_me: $('#connect_me').val(),
                site: $('#site').val(),
                site2: $('#site2').val(),
                learner_birth: $('#learner_birth').val(),
                connect_me: $('#connect_me').attr('title'),
                learner_role: goodRoles.join(),
                Style: goodStyle,
                learner_habit: $('#learner_habit').val(),
                share: $('#share').val(),
                ask: $('#ask').val(),
                note: $('#note').val(),
            };
        },

        feedback: function() {
        },



    });
    
    var auto20 = new Auto20();
    
    
        

</script>

</body>


</hmtl>